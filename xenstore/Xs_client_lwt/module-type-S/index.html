<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (xenstore.Xs_client_lwt.S)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">xenstore</a> &#x00BB; <a href="../index.html">Xs_client_lwt</a> &#x00BB; S</nav><h1>Module type <code>Xs_client_lwt.S</code></h1></header><dl><dt class="spec type" id="type-client"><a href="#type-client" class="anchor"></a><code><span class="keyword">type </span>client</code></dt><dd><p>A multiplexing xenstore client.</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val </span>make : unit <span>&#45;&gt;</span> <a href="index.html#type-client">client</a> Lwt.t</code></dt><dd><p><code>make ()</code> initialises and returns a xenstore client.</p></dd></dl><dl><dt class="spec value" id="val-suspend"><a href="#val-suspend" class="anchor"></a><code><span class="keyword">val </span>suspend : <a href="index.html#type-client">client</a> <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>suspend ()</code> suspends the client, waiting for outstanding RPCs to be completed, cancelling all watches and causing new requests to be queued.</p></dd></dl><dl><dt class="spec value" id="val-resume"><a href="#val-resume" class="anchor"></a><code><span class="keyword">val </span>resume : <a href="index.html#type-client">client</a> <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>resume ()</code> resumes the client. The connection must be up and running again before using this function.</p></dd></dl><dl><dt class="spec type" id="type-handle"><a href="#type-handle" class="anchor"></a><code><span class="keyword">type </span>handle</code></dt><dd><p>A handle represents a single thread's xenstore access.</p></dd></dl><dl><dt class="spec value" id="val-immediate"><a href="#val-immediate" class="anchor"></a><code><span class="keyword">val </span>immediate : <a href="index.html#type-client">client</a> <span>&#45;&gt;</span> (<a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> Lwt.t) <span>&#45;&gt;</span> <span class="type-var">'a</span> Lwt.t</code></dt><dd><p>Access xenstore with individual operations.</p></dd></dl><dl><dt class="spec value" id="val-transaction"><a href="#val-transaction" class="anchor"></a><code><span class="keyword">val </span>transaction : <a href="index.html#type-client">client</a> <span>&#45;&gt;</span> (<a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> Lwt.t) <span>&#45;&gt;</span> <span class="type-var">'a</span> Lwt.t</code></dt><dd><p>Access xenstore with a single transaction. On conflict the operation will be repeated.</p></dd></dl><dl><dt class="spec value" id="val-wait"><a href="#val-wait" class="anchor"></a><code><span class="keyword">val </span>wait : <a href="index.html#type-client">client</a> <span>&#45;&gt;</span> (<a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> Lwt.t) <span>&#45;&gt;</span> <span class="type-var">'a</span> Lwt.t</code></dt><dd><p>Wait for some condition to become true and return a value. The function argument should throw Eagain if the condition is not met, and the condition will be re-evaluated when paths change.</p></dd></dl><dl><dt class="spec value" id="val-directory"><a href="#val-directory" class="anchor"></a><code><span class="keyword">val </span>directory : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string list Lwt.t</code></dt><dd><p><code>directory h path</code> returns the directory listing of <code>path</code>.</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val </span>read : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string Lwt.t</code></dt><dd><p><code>read h path</code> returns the value at <code>path</code> or raises Enoent.</p></dd></dl><dl><dt class="spec value" id="val-write"><a href="#val-write" class="anchor"></a><code><span class="keyword">val </span>write : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>write h k v</code> writes <code>v</code> at <code>k</code>.</p></dd></dl><dl><dt class="spec value" id="val-rm"><a href="#val-rm" class="anchor"></a><code><span class="keyword">val </span>rm : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>rm h k</code> removes the node <code>k</code>.</p></dd></dl><dl><dt class="spec value" id="val-mkdir"><a href="#val-mkdir" class="anchor"></a><code><span class="keyword">val </span>mkdir : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>mkdir h k</code> creates the node <code>k</code> with an empty value.</p></dd></dl><dl><dt class="spec value" id="val-setperms"><a href="#val-setperms" class="anchor"></a><code><span class="keyword">val </span>setperms : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../Xs_protocol/ACL/index.html#type-t">Xs_protocol.ACL.t</a> <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>setperms h k acl</code> sets the permissions of <code>k</code> to <code>acl</code>.</p></dd></dl><dl><dt class="spec value" id="val-debug"><a href="#val-debug" class="anchor"></a><code><span class="keyword">val </span>debug : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string list <span>&#45;&gt;</span> string list Lwt.t</code></dt><dd><p><code>debug cmd_args</code> invokes a debug command.</p></dd></dl><dl><dt class="spec value" id="val-restrict"><a href="#val-restrict" class="anchor"></a><code><span class="keyword">val </span>restrict : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>restrict h domid</code> restricts the current connection to have only the priviledges associated with domain <code>domid</code>.</p></dd></dl><dl><dt class="spec value" id="val-getdomainpath"><a href="#val-getdomainpath" class="anchor"></a><code><span class="keyword">val </span>getdomainpath : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> string Lwt.t</code></dt><dd><p><code>getdomainpath domid</code> returns the local directory of domain <code>domid</code>.</p></dd></dl><dl><dt class="spec value" id="val-watch"><a href="#val-watch" class="anchor"></a><code><span class="keyword">val </span>watch : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../Xs_protocol/Token/index.html#type-t">Xs_protocol.Token.t</a> <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>watch h path token</code> registers a manual watch at <code>path</code> with <code>token</code>.</p></dd></dl><dl><dt class="spec value" id="val-unwatch"><a href="#val-unwatch" class="anchor"></a><code><span class="keyword">val </span>unwatch : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../../Xs_protocol/Token/index.html#type-t">Xs_protocol.Token.t</a> <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>unwatch h path token</code> unregisters a manual watch at <code>path</code> with <code>token</code>.</p></dd></dl><dl><dt class="spec value" id="val-introduce"><a href="#val-introduce" class="anchor"></a><code><span class="keyword">val </span>introduce : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> nativeint <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>introduce h domid store_mfn store_port</code> called by a toolstack to signal the construction of a new domain.</p></dd></dl><dl><dt class="spec value" id="val-set_target"><a href="#val-set_target" class="anchor"></a><code><span class="keyword">val </span>set_target : <a href="index.html#type-handle">handle</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit Lwt.t</code></dt><dd><p><code>set_target h stubdom_domid domid</code> called by a toolstack to grant <code>stubdom_domid</code> the permissions owned by <code>domid</code>.</p></dd></dl></div></body></html>